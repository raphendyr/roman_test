---
$schema: "http://json-schema.org/draft-04/schema"
title: Course config
type: object
definitions:
  image:
    type: string
    description: the docker image
  step:
    type: object
    additionalProperties: false
    required:
      - img
    properties:
      name:
        type: string
        description: name of the step
        #doesn't allow names that are only numerals
        pattern: "[^0-9]+"
      img:
        $ref: "#/definitions/image"
      cmd:
        type: [string, array]
        minItems: 1
        items:
          type: string
        description: commands to execute
      mnt:
        type: string
      env:
        type: object
allOf:
  - $ref: version-v1.0
additionalProperties: false
properties:
  version: {}
  steps:
    type: array
    items:
      oneOf:
        - $ref: "#/definitions/image"
        - $ref: "#/definitions/step"
      
required:
  - version
